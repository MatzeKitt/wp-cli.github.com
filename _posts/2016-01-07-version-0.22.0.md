---
layout: post
author: danielbachhuber
title: Version 0.22.0 released
---

Happy 2016! Before I dive into the RESTful CLI project, I thought it would be worthwhile to get a new release out the door.

WP-CLI v0.22.0 represents [NNN resolved issues and pull requests](https://github.com/wp-cli/wp-cli/issues?q=milestone%3A0.22.0+is%3Aclosed). Here's what's new.

### search-replace for love and profit

Performance boost! Instead of running a MYSQL LIKE statement every 1000 rows, WP-CLI now just runs it once. On a post meta table of ~3.5 million rows where 75,610 rows were affected, this change improved execution time from 734.926s to 225.509s (3.3x faster).

Use the `--export=<filename>` argument to create a SQL file of your transformed data, instead of making updates to the database. This is a helpful feature when you want to prepare a database for a new environment without having to import and then run search-replace.

Wildcards can be used in table names [[#2233](https://github.com/wp-cli/wp-cli/pull/2233)]. search-replace against just meta tables with `wp search-replace <old-string> <new-string> '*meta*'`. Note: the table pattern needs to be quoted, as * is a special character in Bash.

Bug fixes and minor enhancements:

* Recurses objects by default when replacing inside of serialized data [[#2222](https://github.com/wp-cli/wp-cli/pull/2222)]. Among other things, this ensures theme mods are transformed as expected. You can disable the behavior with `--no-recurse-objects`. But, if you do disable the behavior, I'd like to hear from you. I think this is an unnecessary option we could remove at a later date.
* Properly escapes quotes used in search or replace strings [[#2230](https://github.com/wp-cli/wp-cli/pull/2230)].
* Lets users know to flush their persistent object cache after a search-replace procedure is performed [[#2236](https://github.com/wp-cli/wp-cli/pull/2236)].
* Bails early when the replacement string is the same as the search string [[#2235](https://github.com/wp-cli/wp-cli/pull/2235)].
* Indicates execution time when running search/replace with `--verbose` [[#2242](https://github.com/wp-cli/wp-cli/pull/2242)].
* Prevents unnecessary calls to `$wpdb->update()` when no there are replacements to be made [[#2245](https://github.com/wp-cli/wp-cli/pull/2245)].

### Minimum supported WordPress version is now 3.7

WP-CLI's minimum supported WordPress version is now 3.7 [[#2261](https://github.com/wp-cli/wp-cli/pull/2261)].

### Other changes in v0.22.0

Enhancements:

* Plugin scaffolding: makes Travis less noisy by only sending email notifications on the initial build failure for a branch [[#2194](https://github.com/wp-cli/wp-cli/pull/2194)]; plugin header follows WordPress' PHPDoc standards [[#2197](https://github.com/wp-cli/wp-cli/pull/2197)]; adds `.dist` extension to PHPUnit config file to permit overriding with a local config file [[#2247](https://github.com/wp-cli/wp-cli/pull/2247)]; parses `readme.txt` to find WordPress versions to test [[#2255](https://github.com/wp-cli/wp-cli/pull/2255)]
* Includes `not_found` label when scaffolding a custom taxonomy [[#2196](https://github.com/wp-cli/wp-cli/pull/2196)].
* Permits installing remote plugin files without `.zip` in filename [[#2193](https://github.com/wp-cli/wp-cli/pull/2193)].
* Warns when adding a user as a super admin when the user is already a super admin [[#2202](https://github.com/wp-cli/wp-cli/pull/2202)].
* Uses `WP_CLI::log()` instead of `WP_CLI::line()` in `wp import`, so `--quiet` flag is respected [[#2234](https://github.com/wp-cli/wp-cli/pull/2234)].
* Introduces `wp_version_compare()` when comparing WordPress versions [[#2237](https://github.com/wp-cli/wp-cli/pull/2237)]. SVN and Git tags include `-src` in `$wp_version`, which
`version_compare()` doesn't like.
* Adds support for wildcard tables (e.g. `*meta*`), `--all-tables-with-prefix`, and `--format=csv` to `wp db tables` [[#2250](https://github.com/wp-cli/wp-cli/pull/2250)].
* Improves error message when installing a plugin or theme and the resource isn't found [[#2253](https://github.com/wp-cli/wp-cli/pull/2253)].
* Introduces `wp core update --minor` to more easily script minor updates [[#2256](https://github.com/wp-cli/wp-cli/pull/2256)].
* Defers to the `$PAGER` environment variable when set [[#2264](https://github.com/wp-cli/wp-cli/pull/2264)].

Bug fixes:

* Lets `help` run early when WP is detected, but not installed (e.g. `wp core config --help`)[[#2190](https://github.com/wp-cli/wp-cli/pull/2190)]. Bug was introduced in v0.20.0.
* When scaffolding a child theme, creates a safe version of the parent theme slug for the child enqueue function [[#2203](https://github.com/wp-cli/wp-cli/pull/2203)]. Previously, if the parent slug included dashes, an invalid enqueue function would be scaffolded.
* Suppresses error notices when looking for `wp-config.php` and PHP's `open_basedir` is in effect [[#2211](https://github.com/wp-cli/wp-cli/pull/2211)].
* Fixes error notice in `WP_CLI\Loggers\Quiet` [[#2210](https://github.com/wp-cli/wp-cli/pull/2210)].
* Fixes `all_items` label in custom post type scaffolding [[#2213](https://github.com/wp-cli/wp-cli/pull/2213)].
* Ensures `install-package-tests.sh` actually downloads the nightly WP-CLI Phar build, and not a redirect [[#2214](https://github.com/wp-cli/wp-cli/pull/2214)].
* Sets the `upload_space_check_disabled` to `1` when installing multisite [[#2238](https://github.com/wp-cli/wp-cli/pull/2238)]. This mirrors core's behavior on new installs.
* Provides a more helpful message when image regeneration fails[[#2239](https://github.com/wp-cli/wp-cli/pull/2239)].
* Properly updates menu sub-item parent when parent is deleted [[#2262](https://github.com/wp-cli/wp-cli/pull/2262)].

Contributors to this release:


You can browse the full list of [resolved issues](https://github.com/wp-cli/wp-cli/issues?q=milestone%3A0.22.0+is%3Aclosed) on Github.
