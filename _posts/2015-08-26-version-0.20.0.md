---
layout: post
author: danielbachhuber
title: Version 0.20.0 released
---

### Regex search-replace

### Server command

### WP-API CLI

### Documentation changes

    # List plugins on each site in a network
    wp site list --field=url | xargs -n 1 -I % wp plugin list --url=%
    
    # Delete inactive plugins
    wp plugin delete $(wp plugin list --status=inactive --field=name)


### Call for contributions

### Major bug fix: cached partial upgrade files masquerading as full upgrades

Since v0.17.0 ([pull request](https://github.com/wp-cli/wp-cli/pull/1320)), WP-CLI mistakenly cached partial archives in a lossy manner. Specifically, a ZIP file for a partial upgrade would be cached with the same key as a ZIP file for a full upgrade. With the file incorrectly cached, subsequent full upgrades would use the cached partial upgrade archive.

We've [released](https://github.com/wp-cli/wp-cli/releases) v0.17.2, v0.18.1, and v0.19.3 with the bug fix. The cache key was changed as well, so prior invalid WP archives are silently ignored.

Use `wp core verify-checksums` to make sure a given WordPress install has the correct copy of each file. If it doesn't verify, use `wp core download --version=$(wp core version) --force` to re-install WordPress.

### Other changes in v0.20.0

Enhancements:

* Keep up with the bleeding edge by using `wp cli update --nightly`. When using WP-CLI nightly, the hash is now appended to the version.
* Added a simple `wp comment generate` command.
* Cache invalidation is deferred until the end of the command when using `wp term generate`.
* `wp term list` supports filtering by `--term_id=<term-id>`.
* `wp search-replace` has a `--verbose` flag which outputs each column with affected rows as the operation is performed.
* Use `--start_id=<post-id>` to start `wp export` from a given post ID.
* Export a selection of post types with `wp export`.
* Throws a helpful error when an invalid `--url=<url>` is specified on multisite.
* Create a new role from another role with `wp role --clone=<role>`.
* Use `--format=summary` to get one-liner messages with `wp (plugin|theme) update`.
* Switches away from using `wp_download_language_pack()` so languages can be installed with the `DISALLOW_FILE_MODS` constant set.

Bug fixes:

* `wp term generate` tries to generate unique term names on subsequent executions. Previously, it would start its index at `0`, and error for duplicate terms.
* Internalized `wp_clean_update_cache()` (used in `wp core language list` and `wp core language update`) to prevent fatals in WordPress 4.0. The function was introduced in WordPress 4.1.
* When WordPress is detected, WP-CLI will wait until it is fully loaded before executing `wp help`. This means plugins which add commands to an existing namespace can have the help docs appear.
* Corrected Travis notification syntax produced by `wp scaffold plugin-tests` command.
* Supports `Requests` installed to parent project in `WP_CLI\Utils\http_request()`
* Passes thru `--allow-root` in `cli update` to let root update WP-CLI.
* Restored apt-get tab completion after using WP-CLI tab completion.
* Permits categories to be assigned with `wp post update`.
* Prevent `wp import` from using double the memory it actually needs, and save 100s of MBs on large imports.

You can browse the full list of [resolved issues](https://github.com/wp-cli/wp-cli/issues?q=milestone%3A0.20.0+is%3Aclosed) on Github.
